<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AWINLY Admin Panel</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Serif+SC:wght@400;700&display=swap');

    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 40px;
      background-color: #F9F9F9;
      color: #222;
    }
    body[lang="zh"] {
      font-family: 'Noto Serif SC', serif;
    }
    .admin-container {
      max-width: 1000px;
      margin: 0 auto;
      background-color: #FFFFFF;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    h1, h2 {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 20px;
    }
    body[lang="zh"] h1, body[lang="zh"] h2 {
      font-family: 'Noto Serif SC', serif;
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 5px;
    }
    body[lang="zh"] label {
      font-family: 'Noto Serif SC', serif;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px;
      border: 1px solid #D0D0D0;
      border-radius: 4px;
      font-size: 14px;
      box-sizing: border-box;
    }
    body[lang="zh"] input, body[lang="zh"] select, body[lang="zh"] textarea {
      font-family: 'Noto Serif SC', serif;
    }
    textarea {
      height: 100px;
      resize: vertical;
    }
    button {
      padding: 10px 20px;
      background-color: #6B2D5C;
      color: #FFFFFF;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    body[lang="zh"] button {
      font-family: 'Noto Serif SC', serif;
    }
    button:hover {
      background-color: #5A264F;
    }
    button.secondary {
      background-color: #D0D0D0;
      color: #222;
    }
    button.secondary:hover {
      background-color: #B0B0B0;
    }
    #file-input {
      margin-top: 10px;
    }
    .image-preview {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }
    .image-preview img {
      width: 100px;
      height: 66px;
      object-fit: cover;
      border-radius: 4px;
      border: 1px solid #D0D0D0;
    }
    .error {
      color: red;
      font-size: 12px;
      margin-top: 5px;
    }
    body[lang="zh"] .error {
      font-family: 'Noto Serif SC', serif;
    }
    .properties-list {
      margin-top: 40px;
    }
    .property-item {
      border: 1px solid #D0D0D0;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .property-item img {
      width: 100px;
      height: 66px;
      object-fit: cover;
      border-radius: 4px;
    }
    .property-item p {
      margin: 5px 0;
      font-size: 14px;
    }
    body[lang="zh"] .property-item p {
      font-family: 'Noto Serif SC', serif;
    }
    .property-images {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .property-actions {
      display: flex;
      gap: 10px;
    }
    .language-selector {
      position: absolute;
      top: 20px;
      right: 20px;
    }
    .listings-dropdown {
      position: relative;
      display: inline-block;
    }
    .listings-dropdown-btn {
      padding: 8px 16px;
      background-color: #6B2D5C;
      color: #FFFFFF;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background-color 0.3s ease;
    }
    body[lang="zh"] .listings-dropdown-btn {
      font-family: 'Noto Serif SC', serif;
    }
    .listings-dropdown-btn:hover {
      background-color: #5A264F;
    }
    .listings-dropdown-content {
      display: none;
      position: absolute;
      background-color: #FFFFFF;
      min-width: 120px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      z-index: 1;
      border-radius: 4px;
      overflow: hidden;
    }
    .listings-dropdown-content.open {
      display: block;
    }
    .listings-dropdown-item {
      padding: 8px 16px;
      font-size: 14px;
      color: #222;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    body[lang="zh"] .listings-dropdown-item {
      font-family: 'Noto Serif SC', serif;
    }
    .listings-dropdown-item:hover {
      background-color: #F9F9F9;
    }
  </style>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>
<body>
  <div id="root"></div>
  <script>
    const ADMIN_PASSWORD = 'Awinly-Awinly228';
    const CLOUD_NAME = 'dkjakynhh'; // Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð½Ð° Ð²Ð°Ñˆ Cloud Name
    const API_KEY = '724711754654635'; // Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð½Ð° Ð²Ð°Ñˆ API Key
    const API_SECRET = 'v4vizym6WCttYT-13k5XXw7yps8'; // Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð½Ð° Ð²Ð°Ñˆ API Secret

    // Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ñ…ÑÑˆÐ° Ð¸Ð· URL Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ
    if (window.location.hash) {
      window.history.replaceState(null, null, window.location.pathname);
    }

    // ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ð°Ñ€Ð¾Ð»Ñ
    (function() {
      const storedPassword = localStorage.getItem('adminPassword');
      if (!storedPassword || storedPassword !== ADMIN_PASSWORD) {
        const enteredPassword = prompt('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°:');
        if (enteredPassword !== ADMIN_PASSWORD) {
          alert('ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ. Ð”Ð¾ÑÑ‚ÑƒÐ¿ Ð·Ð°Ð¿Ñ€ÐµÑ‰ÐµÐ½.');
          window.location.replace('/');
          return;
        }
        localStorage.setItem('adminPassword', enteredPassword);
      }
    })();

    const translations = {
      EN: {
        admin_title: "AWINLY Admin Panel",
        add_property: "Add Property",
        update_property: "Update Property",
        existing_properties: "Existing Properties",
        no_properties: "No properties found.",
        edit: "Edit",
        delete: "Delete",
        title_en: "Title (English)",
        title_zh: "Title (Chinese)",
        city: "City",
        select_city: "Select City",
        deal_type: "Deal Type",
        property_type: "Property Type",
        price_cny: "Price CNY",
        price_usd: "Price USD",
        area: "Area (mÂ²)",
        floor: "Floor",
        rooms: "Rooms",
        year_built: "Year Built",
        realtor_name: "Realtor Name",
        realtor_email: "Realtor Email",
        realtor_phone: "Realtor Phone",
        description_en: "Description (English)",
        description_zh: "Description (Chinese)",
        upload_images: "Upload Images",
        required_fields: "Please fill in all required fields (Title, City, Price CNY, Price USD).",
        invalid_email: "Please enter a valid realtor email.",
        confirm_delete: "Are you sure you want to delete this property?",
        property_added: "Property added successfully!",
        property_updated: "Property updated successfully!",
        property_deleted: "Property deleted successfully!",
        upload_error: "Image upload failed",
        cloudinary_error: "Cloudinary upload failed. Check console for details.",
        language: "Language",
        buy: "Buy",
        rent: "Rent",
        Apartment: "Apartment",
        House: "House",
        Land: "Land",
        Anqing: "Anqing",
        Baoding: "Baoding",
        Beijing: "Beijing",
        Bengbu: "Bengbu",
        Binzhou: "Binzhou",
        Cangzhou: "Cangzhou",
        Changchun: "Changchun",
        Changsha: "Changsha",
        Changzhou: "Changzhou",
        Chengde: "Chengde",
        Chengdu: "Chengdu",
        Chizhou: "Chizhou",
        Chongqing: "Chongqing",
        Chuzhou: "Chuzhou",
        Dalian: "Dalian",
        Dezhou: "Dezhou",
        Dongying: "Dongying",
        Fuyang: "Fuyang",
        Fuzhou: "Fuzhou",
        Guangzhou: "Guangzhou",
        Guiyang: "Guiyang",
        Haikou: "Haikou",
        Handan: "Handan",
        Hangzhou: "Hangzhou",
        Harbin: "Harbin",
        Hefei: "Hefei",
        Hengshui: "Hengshui",
        Heze: "Heze",
        Hohhot: "Hohhot",
        HuaiAn: "Huai'an",
        Huaibei: "Huaibei",
        Huainan: "Huainan",
        Huangshan: "Huangshan",
        Huzhou: "Huzhou",
        Jiaxing: "Jiaxing",
        Jinan: "Jinan",
        Jinhua: "Jinhua",
        Kunming: "Kunming",
        Laiwu: "Laiwu",
        Langfang: "Langfang",
        Lanzhou: "Lanzhou",
        Lhasa: "Lhasa",
        Lianyungang: "Lianyungang",
        Liaocheng: "Liaocheng",
        Linyi: "Linyi",
        Lishui: "Lishui",
        LuAn: "Lu'an",
        MaAnshan: "Ma'anshan",
        Nanchang: "Nanchang",
        Nanjing: "Nanjing",
        Nanning: "Nanning",
        Ningbo: "Ningbo",
        Qingdao: "Qingdao",
        Qinhuangdao: "Qinhuangdao",
        Quzhou: "Quzhou",
        Rizhao: "Rizhao",
        Shanghai: "Shanghai",
        Shaoxing: "Shaoxing",
        Shenyang: "Shenyang",
        Shenzhen: "Shenzhen",
        Shijiazhuang: "Shijiazhuang",
        Suqian: "Suqian",
        Suzhou: "Suzhou",
        Taiyuan: "Taiyuan",
        Taizhou: "Taizhou",
        Tangshan: "Tangshan",
        Tianjin: "Tianjin",
        Tongling: "Tongling",
        Urumqi: "Urumqi",
        Weifang: "Weifang",
        Weihai: "Weihai",
        Wenzhou: "Wenzhou",
        Wuhan: "Wuhan",
        Wuxi: "Wuxi",
        XiAn: "Xi'an",
        Xiamen: "Xiamen",
        Xingtai: "Xingtai",
        Xining: "Xining",
        Xuancheng: "Xuancheng",
        Yancheng: "Yancheng",
        Yangzhou: "Yangzhou",
        Yantai: "Yantai",
        Yinchuan: "Yinchuan",
        Zaozhuang: "Zaozhuang",
        Zhangjiakou: "Zhangjiakou",
        Zhengding: "Zhengding",
        Zhengzhou: "Zhengzhou",
        Zhenjiang: "Zhenjiang",
        Zhoushan: "Zhoushan",
        Zibo: "Zibo"
      },
      zh: {
        admin_title: "AWINLY ç®¡ç†é¢æ¿",
        add_property: "æ·»åŠ ç‰©ä¸š",
        update_property: "æ›´æ–°ç‰©ä¸š",
        existing_properties: "çŽ°æœ‰ç‰©ä¸š",
        no_properties: "æœªæ‰¾åˆ°ç‰©ä¸šã€‚",
        edit: "ç¼–è¾‘",
        delete: "åˆ é™¤",
        title_en: "æ ‡é¢˜ (è‹±æ–‡)",
        title_zh: "æ ‡é¢˜ (ä¸­æ–‡)",
        city: "åŸŽå¸‚",
        select_city: "é€‰æ‹©åŸŽå¸‚",
        deal_type: "äº¤æ˜“ç±»åž‹",
        property_type: "ç‰©ä¸šç±»åž‹",
        price_cny: "äººæ°‘å¸ä»·æ ¼",
        price_usd: "ç¾Žå…ƒä»·æ ¼",
        area: "é¢ç§¯ï¼ˆå¹³æ–¹ç±³ï¼‰",
        floor: "æ¥¼å±‚",
        rooms: "æˆ¿é—´",
        year_built: "å»ºé€ å¹´ä»½",
        realtor_name: "ç»çºªäººå§“å",
        realtor_email: "ç»çºªäººé‚®ç®±",
        realtor_phone: "ç»çºªäººç”µè¯",
        description_en: "æè¿°ï¼ˆè‹±æ–‡)",
        description_zh: "æè¿°ï¼ˆä¸­æ–‡)",
        upload_images: "ä¸Šä¼ å›¾ç‰‡",
        required_fields: "è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µï¼ˆæ ‡é¢˜ã€åŸŽå¸‚ã€äººæ°‘å¸ä»·æ ¼ã€ç¾Žå…ƒä»·æ ¼ï¼‰ã€‚",
        invalid_email: "è¯·è¾“å…¥æœ‰æ•ˆçš„ç»çºªäººé‚®ç®±ã€‚",
        confirm_delete: "æ‚¨ç¡®å®šè¦åˆ é™¤æ­¤ç‰©ä¸šå—ï¼Ÿ",
        property_added: "ç‰©ä¸šæ·»åŠ æˆåŠŸï¼",
        property_updated: "ç‰©ä¸šæ›´æ–°æˆåŠŸï¼",
        property_deleted: "ç‰©ä¸šåˆ é™¤æˆåŠŸï¼",
        upload_error: "å›¾ç‰‡ä¸Šä¼ å¤±è´¥",
        cloudinary_error: "Cloudinary ä¸Šä¼ å¤±è´¥ã€‚è¯·æ£€æŸ¥æŽ§åˆ¶å°è¯¦æƒ…ã€‚",
        language: "è¯­è¨€",
        buy: "è´­ä¹°",
        rent: "ç§Ÿèµ",
        Apartment: "å…¬å¯“",
        House: "åˆ«å¢…",
        Land: "åœŸåœ°",
        Anqing: "å®‰åº†",
        Baoding: "ä¿å®š",
        Beijing: "åŒ—äº¬",
        Bengbu: "èšŒåŸ ",
        Binzhou: "æ»¨å·ž",
        Cangzhou: "æ²§å·ž",
        Changchun: "é•¿æ˜¥",
        Changsha: "é•¿æ²™",
        Changzhou: "å¸¸å·ž",
        Chengde: "æ‰¿å¾·",
        Chengdu: "æˆéƒ½",
        Chizhou: "æ± å·ž",
        Chongqing: "é‡åº†",
        Chuzhou: "æ»å·ž",
        Dalian: "å¤§è¿ž",
        Dezhou: "å¾·å·ž",
        Dongying: "ä¸œè¥",
        Fuyang: "é˜œé˜³",
        Fuzhou: "ç¦å·ž",
        Guangzhou: "å¹¿å·ž",
        Guiyang: "è´µé˜³",
        Haikou: "æµ·å£",
        Handan: "é‚¯éƒ¸",
        Hangzhou: "æ­å·ž",
        Harbin: "å“ˆå°”æ»¨",
        Hefei: "åˆè‚¥",
        Hengshui: "è¡¡æ°´",
        Heze: "èæ³½",
        Hohhot: "å‘¼å’Œæµ©ç‰¹",
        HuaiAn: "æ·®å®‰",
        Huaibei: "æ·®åŒ—",
        Huainan: "æ·®å—",
        Huangshan: "é»„å±±",
        Huzhou: "æ¹–å·ž",
        Jiaxing: "å˜‰å…´",
        Jinan: "æµŽå—",
        Jinhua: "é‡‘åŽ",
        Kunming: "æ˜†æ˜Ž",
        Laiwu: "èŽ±èŠœ",
        Langfang: "å»ŠåŠ",
        Lanzhou: "å…°å·ž",
        Lhasa: "æ‹‰è¨",
        Lianyungang: "è¿žäº‘æ¸¯",
        Liaocheng: "èŠåŸŽ",
        Linyi: "ä¸´æ²‚",
        Lishui: "ä¸½æ°´",
        LuAn: "å…­å®‰",
        MaAnshan: "é©¬éžå±±",
        Nanchang: "å—æ˜Œ",
        Nanjing: "å—äº¬",
        Nanning: "å—å®",
        Ningbo: "å®æ³¢",
        Qingdao: "é’å²›",
        Qinhuangdao: "ç§¦çš‡å²›",
        Quzhou: "è¡¢å·ž",
        Rizhao: "æ—¥ç…§",
        Shanghai: "ä¸Šæµ·",
        Shaoxing: "ç»å…´",
        Shenyang: "æ²ˆé˜³",
        Shenzhen: "æ·±åœ³",
        Shijiazhuang: "çŸ³å®¶åº„",
        Suqian: "å®¿è¿",
        Suzhou: "è‹å·ž",
        Taiyuan: "å¤ªåŽŸ",
        Taizhou: "å°å·ž",
        Tangshan: "å”å±±",
        Tianjin: "å¤©æ´¥",
        Tongling: "é“œé™µ",
        Urumqi: "ä¹Œé²æœ¨é½",
        Weifang: "æ½åŠ",
        Weihai: "å¨æµ·",
        Wenzhou: "æ¸©å·ž",
        Wuhan: "æ­¦æ±‰",
        Wuxi: "æ— é”¡",
        XiAn: "è¥¿å®‰",
        Xiamen: "åŽ¦é—¨",
        Xingtai: "é‚¢å°",
        Xining: "è¥¿å®",
        Xuancheng: "å®£åŸŽ",
        Yancheng: "ç›åŸŽ",
        Yangzhou: "æ‰¬å·ž",
        Yantai: "çƒŸå°",
        Yinchuan: "é“¶å·",
        Zaozhuang: "æž£åº„",
        Zhangjiakou: "å¼ å®¶å£",
        Zhengding: "æ­£å®š",
        Zhengzhou: "éƒ‘å·ž",
        Zhenjiang: "é•‡æ±Ÿ",
        Zhoushan: "èˆŸå±±",
        Zibo: "æ·„åš"
      },
      ru: {
        admin_title: "ÐÐ´Ð¼Ð¸Ð½-Ð¿Ð°Ð½ÐµÐ»ÑŒ AWINLY",
        add_property: "Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ð±ÑŠÐµÐºÑ‚",
        update_property: "ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¾Ð±ÑŠÐµÐºÑ‚",
        existing_properties: "Ð¡ÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ Ð¾Ð±ÑŠÐµÐºÑ‚Ñ‹",
        no_properties: "ÐžÐ±ÑŠÐµÐºÑ‚Ñ‹ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹.",
        edit: "Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ",
        delete: "Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ",
        title_en: "ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ (Ð½Ð° Ð°Ð½Ð³Ð»Ð¸Ð¹ÑÐºÐ¾Ð¼)",
        title_zh: "ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ (Ð½Ð° ÐºÐ¸Ñ‚Ð°Ð¹ÑÐºÐ¾Ð¼)",
        city: "Ð“Ð¾Ñ€Ð¾Ð´",
        select_city: "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð³Ð¾Ñ€Ð¾Ð´",
        deal_type: "Ð¢Ð¸Ð¿ ÑÐ´ÐµÐ»ÐºÐ¸",
        property_type: "Ð¢Ð¸Ð¿ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸",
        price_cny: "Ð¦ÐµÐ½Ð° Ð² CNY",
        price_usd: "Ð¦ÐµÐ½Ð° Ð² USD",
        area: "ÐŸÐ»Ð¾Ñ‰Ð°Ð´ÑŒ (Ð¼Â²)",
        floor: "Ð­Ñ‚Ð°Ð¶",
        rooms: "ÐšÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹",
        year_built: "Ð“Ð¾Ð´ Ð¿Ð¾ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸",
        realtor_name: "Ð˜Ð¼Ñ Ñ€Ð¸ÐµÐ»Ñ‚Ð¾Ñ€Ð°",
        realtor_email: "Email Ñ€Ð¸ÐµÐ»Ñ‚Ð¾Ñ€Ð°",
        realtor_phone: "Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½ Ñ€Ð¸ÐµÐ»Ñ‚Ð¾Ñ€Ð°",
        description_en: "ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ (Ð½Ð° Ð°Ð½Ð³Ð»Ð¸Ð¹ÑÐºÐ¾Ð¼)",
        description_zh: "ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ (Ð½Ð° ÐºÐ¸Ñ‚Ð°Ð¹ÑÐºÐ¾Ð¼)",
        upload_images: "Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ",
        required_fields: "Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð²ÑÐµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ð¾Ð»Ñ (ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ, Ð“Ð¾Ñ€Ð¾Ð´, Ð¦ÐµÐ½Ð° Ð² CNY, Ð¦ÐµÐ½Ð° Ð² USD).",
        invalid_email: "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ email Ñ€Ð¸ÐµÐ»Ñ‚Ð¾Ñ€Ð°.",
        confirm_delete: "Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾Ñ‚ Ð¾Ð±ÑŠÐµÐºÑ‚?",
        property_added: "ÐžÐ±ÑŠÐµÐºÑ‚ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½!",
        property_updated: "ÐžÐ±ÑŠÐµÐºÑ‚ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½!",
        property_deleted: "ÐžÐ±ÑŠÐµÐºÑ‚ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½!",
        upload_error: "ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ",
        cloudinary_error: "ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð² Cloudinary. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ Ð´Ð»Ñ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹.",
        language: "Ð¯Ð·Ñ‹Ðº",
        buy: "ÐŸÐ¾ÐºÑƒÐ¿ÐºÐ°",
        rent: "ÐÑ€ÐµÐ½Ð´Ð°",
        Apartment: "ÐšÐ²Ð°Ñ€Ñ‚Ð¸Ñ€Ð°",
        House: "Ð”Ð¾Ð¼",
        Land: "Ð—ÐµÐ¼Ð»Ñ",
        Anqing: "ÐÐ½ÑŒÑ†Ð¸Ð½",
        Baoding: "Ð‘Ð°Ð¾Ð´Ð¸Ð½",
        Beijing: "ÐŸÐµÐºÐ¸Ð½",
        Bengbu: "Ð‘ÑÐ½Ð±Ñƒ",
        Binzhou: "Ð‘Ð¸Ð½ÑŒÑ‡Ð¶Ð¾Ñƒ",
        Cangzhou: "Ð¦Ð°Ð½Ñ‡Ð¶Ð¾Ñƒ",
        Changchun: "Ð§Ð°Ð½Ñ‡ÑƒÐ½ÑŒ",
        Changsha: "Ð§Ð°Ð½ÑˆÐ°",
        Changzhou: "Ð§Ð°Ð½Ñ‡Ð¶Ð¾Ñƒ",
        Chengde: "Ð§ÑÐ½Ð´Ñ",
        Chengdu: "Ð§ÑÐ½Ð´Ñƒ",
        Chizhou: "Ð§Ð¸Ñ‡Ð¶Ð¾Ñƒ",
        Chongqing: "Ð§ÑƒÐ½Ñ†Ð¸Ð½",
        Chuzhou: "Ð§ÑƒÑ‡Ð¶Ð¾Ñƒ",
        Dalian: "Ð”Ð°Ð»ÑÐ½ÑŒ",
        Dezhou: "Ð”ÑÑ‡Ð¶Ð¾Ñƒ",
        Dongying: "Ð”ÑƒÐ½ÑŠÐ¸Ð½",
        Fuyang: "Ð¤ÑƒÑÐ½",
        Fuzhou: "Ð¤ÑƒÑ‡Ð¶Ð¾Ñƒ",
        Guangzhou: "Ð“ÑƒÐ°Ð½Ñ‡Ð¶Ð¾Ñƒ",
        Guiyang: "Ð“ÑƒÐ¹ÑÐ½",
        Haikou: "Ð¥Ð°Ð¹ÐºÐ¾Ñƒ",
        Handan: "Ð¥Ð°Ð½ÑŒÐ´Ð°Ð½ÑŒ",
        Hangzhou: "Ð¥Ð°Ð½Ñ‡Ð¶Ð¾Ñƒ",
        Harbin: "Ð¥Ð°Ñ€Ð±Ð¸Ð½",
        Hefei: "Ð¥ÑÑ„ÑÐ¹",
        Hengshui: "Ð¥ÑÐ½ÑˆÑƒÐ¹",
        Heze: "Ð¥ÑÑ†Ð·Ñ",
        Hohhot: "Ð¥ÑƒÑ…-Ð¥Ð¾Ñ‚Ð¾",
        HuaiAn: "Ð¥ÑƒÐ°Ð¹Ð°Ð½ÑŒ",
        Huaibei: "Ð¥ÑƒÐ°Ð¹Ð±ÑÐ¹",
        Huainan: "Ð¥ÑƒÐ°Ð¹Ð½Ð°Ð½ÑŒ",
        Huangshan: "Ð¥ÑƒÐ°Ð½ÑˆÐ°Ð½ÑŒ",
        Huzhou: "Ð¥ÑƒÑ‡Ð¶Ð¾Ñƒ",
        Jiaxing: "Ð¦Ð·ÑÑÐ¸Ð½",
        Jinan: "Ð¦Ð·Ð¸Ð½Ð°Ð½ÑŒ",
        Jinhua: "Ð¦Ð·Ð¸Ð½ÑŒÑ…ÑƒÐ°",
        Kunming: "ÐšÑƒÐ½ÑŒÐ¼Ð¸Ð½",
        Laiwu: "Ð›Ð°Ð¹Ñƒ",
        Langfang: "Ð›Ð°Ð½Ñ„Ð°Ð½",
        Lanzhou: "Ð›Ð°Ð½ÑŒÑ‡Ð¶Ð¾Ñƒ",
        Lhasa: "Ð›Ñ…Ð°ÑÐ°",
        Lianyungang: "Ð›ÑÐ½ÑŒÑŽÐ½ÑŒÐ³Ð°Ð½",
        Liaocheng: "Ð›ÑÐ¾Ñ‡ÑÐ½",
        Linyi: "Ð›Ð¸Ð½ÑŒÐ¸Ð¹",
        Lishui: "Ð›Ð¸ÑˆÑƒÐ¹",
        LuAn: "Ð›ÑƒÐ°Ð½ÑŒ",
        MaAnshan: "ÐœÐ°Ð°Ð½ÑŒÑˆÐ°Ð½ÑŒ",
        Nanchang: "ÐÐ°Ð½ÑŒÑ‡Ð°Ð½",
        Nanjing: "ÐÐ°Ð½ÐºÐ¸Ð½",
        Nanning: "ÐÐ°Ð½ÑŒÐ½Ð¸Ð½",
        Ningbo: "ÐÐ¸Ð½Ð±Ð¾",
        Qingdao: "Ð¦Ð¸Ð½Ð´Ð°Ð¾",
        Qinhuangdao: "Ð¦Ð¸Ð½ÑŒÑ…ÑƒÐ°Ð½Ð´Ð°Ð¾",
        Quzhou: "Ð¦ÑŽÐ¹Ñ‡Ð¶Ð¾Ñƒ",
        Rizhao: "Ð–Ð¸Ñ‡Ð¶Ð°Ð¾",
        Shanghai: "Ð¨Ð°Ð½Ñ…Ð°Ð¹",
        Shaoxing: "Ð¨Ð°Ð¾ÑÐ¸Ð½",
        Shenyang: "Ð¨ÑÐ½ÑŒÑÐ½",
        Shenzhen: "Ð¨ÑÐ½ÑŒÑ‡Ð¶ÑÐ½ÑŒ",
        Shijiazhuang: "Ð¨Ð¸Ñ†Ð·ÑÑ‡Ð¶ÑƒÐ°Ð½",
        Suqian: "Ð¡ÑƒÑ†ÑÐ½ÑŒ",
        Suzhou: "Ð¡ÑƒÑ‡Ð¶Ð¾Ñƒ",
        Taiyuan: "Ð¢Ð°Ð¹ÑŽÐ°Ð½ÑŒ",
        Taizhou: "Ð¢Ð°Ð¹Ñ‡Ð¶Ð¾Ñƒ",
        Tangshan: "Ð¢Ð°Ð½ÑˆÐ°Ð½ÑŒ",
        Tianjin: "Ð¢ÑÐ½ÑŒÑ†Ð·Ð¸Ð½ÑŒ",
        Tongling: "Ð¢ÑƒÐ½Ð»Ð¸Ð½",
        Urumqi: "Ð£Ñ€ÑƒÐ¼Ñ‡Ð¸",
        Weifang: "Ð’ÑÐ¹Ñ„Ð°Ð½",
        Weihai: "Ð’ÑÐ¹Ñ…Ð°Ð¹",
        Wenzhou: "Ð’ÑÐ½ÑŒÑ‡Ð¶Ð¾Ñƒ",
        Wuhan: "Ð£Ñ…Ð°Ð½ÑŒ",
        Wuxi: "Ð£ÑÐ¸",
        XiAn: "Ð¡Ð¸Ð°Ð½ÑŒ",
        Xiamen: "Ð¡ÑÐ¼ÑÐ½ÑŒ",
        Xingtai: "Ð¡Ð¸Ð½Ñ‚Ð°Ð¹",
        Xining: "Ð¡Ð¸Ð½Ð¸Ð½",
        Xuancheng: "Ð¡ÑŽÐ°Ð½ÑŒÑ‡ÑÐ½",
        Yancheng: "Ð¯Ð½ÑŒÑ‡ÑÐ½",
        Yangzhou: "Ð¯Ð½Ñ‡Ð¶Ð¾Ñƒ",
        Yantai: "Ð¯Ð½ÑŒÑ‚Ð°Ð¹",
        Yinchuan: "Ð˜Ð½ÑŒÑ‡ÑƒÐ°Ð½ÑŒ",
        Zaozhuang: "Ð¦Ð·Ð°Ð¾Ñ‡Ð¶ÑƒÐ°Ð½",
        Zhangjiakou: "Ð§Ð¶Ð°Ð½Ñ†Ð·ÑÐºÐ¾Ñƒ",
        Zhengding: "Ð§Ð¶ÑÐ½Ð´Ð¸Ð½",
        Zhengzhou: "Ð§Ð¶ÑÐ½Ñ‡Ð¶Ð¾Ñƒ",
        Zhenjiang: "Ð§Ð¶ÑÐ½ÑŒÑ†Ð·ÑÐ½",
        Zhoushan: "Ð§Ð¶Ð¾ÑƒÑˆÐ°Ð½ÑŒ",
        Zibo: "Ð¦Ð·Ñ‹Ð±Ð¾"
      }
    };

    const languages = [
      { code: 'EN', name: 'English', flag: 'ðŸ‡¬ðŸ‡§' },
      { code: 'zh', name: 'ä¸­æ–‡', flag: 'ðŸ‡¨ðŸ‡³' },
      { code: 'ru', name: 'Ð ÑƒÑÑÐºÐ¸Ð¹', flag: 'ðŸ‡·ðŸ‡º' }
    ];

    const adminCities = [
      'Anqing', 'Baoding', 'Beijing', 'Bengbu', 'Binzhou', 'Cangzhou', 'Changchun', 'Changsha',
      'Changzhou', 'Chengde', 'Chengdu', 'Chizhou', 'Chongqing', 'Chuzhou', 'Dalian', 'Dezhou',
      'Dongying', 'Fuyang', 'Fuzhou', 'Guangzhou', 'Guiyang', 'Haikou', 'Handan', 'Hangzhou',
      'Harbin', 'Hefei', 'Hengshui', 'Heze', 'Hohhot', 'HuaiAn', 'Huaibei', 'Huainan', 'Huangshan',
      'Huzhou', 'Jiaxing', 'Jinan', 'Jinhua', 'Kunming', 'Laiwu', 'Langfang', 'Lanzhou', 'Lhasa',
      'Lianyungang', 'Liaocheng', 'Linyi', 'Lishui', 'LuAn', 'MaAnshan', 'Nanchang', 'Nanjing',
      'Nanning', 'Ningbo', 'Qingdao', 'Qinhuangdao', 'Quzhou', 'Rizhao', 'Shanghai', 'Shaoxing',
      'Shenyang', 'Shenzhen', 'Shijiazhuang', 'Suqian', 'Suzhou', 'Taiyuan', 'Taizhou', 'Tangshan',
      'Tianjin', 'Tongling', 'Urumqi', 'Weifang', 'Weihai', 'Wenzhou', 'Wuhan', 'Wuxi', 'XiAn',
      'Xiamen', 'Xingtai', 'Xining', 'Xuancheng', 'Yancheng', 'Yangzhou', 'Yantai', 'Yinchuan',
      'Zaozhuang', 'Zhangjiakou', 'Zhengding', 'Zhengzhou', 'Zhenjiang', 'Zhoushan', 'Zibo'
    ];

    const dealTypes = ['buy', 'rent'];
    const propertyTypes = ['Apartment', 'House', 'Land'];

    const { useState, useEffect, useRef } = React;
    const h = React.createElement;

    function generateSignature(paramsToSign) {
      const timestamp = Math.floor(Date.now() / 1000);
      const params = { ...paramsToSign, timestamp };
      const sortedKeys = Object.keys(params).sort();
      const stringToSign = sortedKeys.map(key => `${key}=${params[key]}`).join('&') + API_SECRET;
      const signature = CryptoJS.SHA1(stringToSign).toString(CryptoJS.enc.Hex);
      console.log('String to sign:', stringToSign);
      console.log('Generated signature:', signature);
      return { signature, timestamp };
    }

    function AdminPanel() {
      const [lang, setLang] = useState('EN');
      const [formData, setFormData] = useState({
        id: null,
        titleEN: '',
        titleZH: '',
        city: '',
        dealType: 'buy',
        propertyType: 'Apartment',
        priceCNY: '',
        priceUSD: '',
        area: '',
        floor: '',
        rooms: '',
        yearBuilt: '',
        realtor: { name: '', email: '', phone: '' },
        descriptionEN: '',
        descriptionZH: '',
        images: []
      });
      const [error, setError] = useState('');
      const [properties, setProperties] = useState([]);
      const [isEditing, setIsEditing] = useState(false);
      const [isLanguageDropdownOpen, setIsLanguageDropdownOpen] = useState(false);
      const fileInputRef = useRef(null);
      const languageTimeoutRef = useRef(null);

      const getTranslation = (key) => translations[lang][key] || translations.EN[key] || key;

      useEffect(() => {
        try {
          const savedProperties = JSON.parse(localStorage.getItem('properties')) || [];
          setProperties(savedProperties);
          console.log('Admin loaded properties:', savedProperties);
        } catch (error) {
          console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð² Ð¸Ð· localStorage:', error);
          setProperties([]);
          setError(getTranslation('cloudinary_error'));
        }
      }, []);

      useEffect(() => {
        document.documentElement.lang = lang.toLowerCase();
      }, [lang]);

      const handleInputChange = (e) => {
        const { name, value } = e.target;
        if (name.startsWith('realtor.')) {
          const field = name.split('.')[1];
          setFormData(prev => ({
            ...prev,
            realtor: { ...prev.realtor, [field]: value }
          }));
        } else {
          setFormData(prev => ({ ...prev, [name]: value }));
        }
      };

      const handleFileChange = (e) => {
        const files = Array.from(e.target.files);
        uploadFiles(files);
      };

      const uploadFiles = async (files) => {
        const url = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`;
        try {
          const uploadedUrls = [];
          for (const file of files) {
            const formDataToSend = new FormData();
            const paramsToSign = {};
            const { signature, timestamp } = generateSignature(paramsToSign);
            formDataToSend.append('file', file);
            formDataToSend.append('api_key', API_KEY);
            formDataToSend.append('timestamp', timestamp);
            formDataToSend.append('signature', signature);

            const response = await fetch(url, {
              method: 'POST',
              body: formDataToSend
            });
            const result = await response.json();
            if (result.error) {
              throw new Error(result.error.message);
            }
            uploadedUrls.push(result.secure_url);
            console.log('Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾:', result.secure_url);
          }
          setFormData(prev => ({
            ...prev,
            images: [...prev.images, ...uploadedUrls]
          }));
          setError('');
        } catch (error) {
          console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð² Cloudinary:', error);
          setError(getTranslation('cloudinary_error') + ': ' + error.message);
        }
      };

      const handleUploadClick = () => {
        fileInputRef.current.click();
      };

      const handleSubmit = (e) => {
        e.preventDefault();
        console.log('ÐžÑ‚Ð¿Ñ€Ð°Ð²ÐºÐ° Ñ„Ð¾Ñ€Ð¼Ñ‹:', formData);
        if (!formData.titleEN || !formData.titleZH || !formData.city || !formData.priceCNY || !formData.priceUSD) {
          setError(getTranslation('required_fields'));
          console.error('ÐžÑ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‚ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ð¾Ð»Ñ');
          return;
        }
        if (!formData.realtor.email.includes('@')) {
          setError(getTranslation('invalid_email'));
          console.error('ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ email Ñ€Ð¸ÐµÐ»Ñ‚Ð¾Ñ€Ð°');
          return;
        }
        const newProperty = {
          id: formData.id || Date.now(),
          country: 'China',
          titleEN: formData.titleEN,
          titleZH: formData.titleZH,
          city: formData.city,
          dealType: formData.dealType,
          propertyType: formData.propertyType,
          priceCNY: parseFloat(formData.priceCNY) || 0,
          priceUSD: parseFloat(formData.priceUSD) || 0,
          area: parseInt(formData.area) || null,
          floor: parseInt(formData.floor) || null,
          rooms: parseInt(formData.rooms) || null,
          yearBuilt: parseInt(formData.yearBuilt) || null,
          realtor: formData.realtor,
          descriptionEN: formData.descriptionEN,
          descriptionZH: formData.descriptionZH,
          images: formData.images
        };
        try {
          let updatedProperties;
          if (isEditing) {
            updatedProperties = properties.map(p => p.id === newProperty.id ? newProperty : p);
            alert(getTranslation('property_updated'));
          } else {
            updatedProperties = [...properties, newProperty];
            alert(getTranslation('property_added'));
          }
          localStorage.setItem('properties', JSON.stringify(updatedProperties));
          setProperties(updatedProperties);
          resetForm();
        } catch (error) {
          console.error('ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð² localStorage:', error);
          setError(getTranslation('cloudinary_error'));
        }
      };

      const handleEdit = (property) => {
        setFormData({
          id: property.id,
          titleEN: property.titleEN || '',
          titleZH: property.titleZH || '',
          city: property.city || '',
          dealType: property.dealType || 'buy',
          propertyType: property.propertyType || 'Apartment',
          priceCNY: property.priceCNY?.toString() || '',
          priceUSD: property.priceUSD?.toString() || '',
          area: property.area?.toString() || '',
          floor: property.floor?.toString() || '',
          rooms: property.rooms?.toString() || '',
          yearBuilt: property.yearBuilt?.toString() || '',
          realtor: property.realtor || { name: '', email: '', phone: '' },
          descriptionEN: property.descriptionEN || '',
          descriptionZH: property.descriptionZH || '',
          images: property.images || []
        });
        setIsEditing(true);
        setError('');
      };

      const handleDelete = (id) => {
        if (window.confirm(getTranslation('confirm_delete'))) {
          try {
            const updatedProperties = properties.filter(p => p.id !== id);
            localStorage.setItem('properties', JSON.stringify(updatedProperties));
            setProperties(updatedProperties);
            alert(getTranslation('property_deleted'));
            console.log('ÐžÐ±ÑŠÐµÐºÑ‚ ÑƒÐ´Ð°Ð»ÐµÐ½, id:', id);
          } catch (error) {
            console.error('ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð¾Ð±ÑŠÐµÐºÑ‚Ð°:', error);
            setError(getTranslation('cloudinary_error'));
          }
        }
      };

      const resetForm = () => {
        setFormData({
          id: null,
          titleEN: '',
          titleZH: '',
          city: '',
          dealType: 'buy',
          propertyType: 'Apartment',
          priceCNY: '',
          priceUSD: '',
          area: '',
          floor: '',
          rooms: '',
          yearBuilt: '',
          realtor: { name: '', email: '', phone: '' },
          descriptionEN: '',
          descriptionZH: '',
          images: []
        });
        setIsEditing(false);
        setError('');
      };

      const handleLanguageChange = (langCode) => {
        setLang(langCode);
        setIsLanguageDropdownOpen(false);
      };

      const handleLanguageMouseEnter = () => {
        clearTimeout(languageTimeoutRef.current);
        languageTimeoutRef.current = setTimeout(() => {
          setIsLanguageDropdownOpen(true);
        }, 100);
      };

      const handleLanguageMouseLeave = () => {
        clearTimeout(languageTimeoutRef.current);
        languageTimeoutRef.current = setTimeout(() => {
          setIsLanguageDropdownOpen(false);
        }, 200);
      };

      return h('div', { className: 'admin-container' }, [
        h('div', { className: 'language-selector' }, [
          h('div', {
            className: 'listings-dropdown',
            onMouseEnter: handleLanguageMouseEnter,
            onMouseLeave: handleLanguageMouseLeave
          }, [
            h('button', { className: 'listings-dropdown-btn' }, [
              languages.find(l => l.code === lang)?.flag || 'ðŸŒ',
              ' ',
              languages.find(l => l.code === lang)?.name || getTranslation('language')
            ]),
            h('div', { className: `listings-dropdown-content ${isLanguageDropdownOpen ? 'open' : ''}` }, 
              languages.map(langOption => h('div', {
                key: langOption.code,
                className: 'listings-dropdown-item',
                onClick: () => handleLanguageChange(langOption.code)
              }, [
                langOption.flag,
                ' ',
                langOption.name
              ])))
          ])
        ]),
        h('h1', null, getTranslation('admin_title')),
        h('form', { onSubmit: handleSubmit }, [
          h('div', { className: 'form-group' }, [
            h('label', { htmlFor: 'titleEN' }, getTranslation('title_en') + ' *'),
            h('input', {
              type: 'text',
              id: 'titleEN',
              name: 'titleEN',
              value: formData.titleEN,
              onChange: handleInputChange,
              required: true
            })
          ]),
          h('div', { className: 'form-group' }, [
            h('label', { htmlFor: 'titleZH' }, getTranslation('title_zh') + ' *'),
            h('input', {
              type: 'text',
              id: 'titleZH',
              name: 'titleZH',
              value: formData.titleZH,
              onChange: handleInputChange,
              required: true
            })
          ]),
          h('div', { className: 'form-group' }, [
            h('label', { htmlFor: 'city' }, getTranslation('city') + ' *'),
            h('select', {
              id: 'city',
              name: 'city',
              value: formData.city,
              onChange: handleInputChange,
              required: true
            }, [
              h('option', { value: '' }, getTranslation('select_city')),
              ...adminCities.map(city => h('option', { key: city, value: city }, getTranslation(city)))
            ])
          ]),
          h('div', { className: 'form-group' }, [
            h('label', { htmlFor: 'dealType' }, getTranslation('deal_type')),
            h('select', {
              id: 'dealType',
              name: 'dealType',
              value: formData.dealType,
              onChange: handleInputChange
            }, dealTypes.map(type => h('option', { key: type, value: type }, getTranslation(type)))
            )
          ]),
          h('div', { className: 'form-group' }, [
            h('label', { htmlFor: 'propertyType' }, getTranslation('property_type')),
            h('select', {
              id: 'propertyType',
              name: 'propertyType',
              value: formData.propertyType,
              onChange: handleInputChange
            }, propertyTypes.map(type => h('option', { key: type, value: type }, getTranslation(type)))
            )
          ]),
          h('div', { className: 'form-group' }, [
            h('label', { htmlFor: 'priceCNY' }, getTranslation('price_cny') + ' *'),
            h('input', {
              type: 'number',
              id: 'priceCNY',
              name: 'priceCNY',
              value: formData.priceCNY,
              onChange: handleInputChange,
              required: true
            })
          ]),
          h('div', { className: 'form-group' }, [
            h('label', { htmlFor: 'priceUSD' }, getTranslation('price_usd') + ' *'),
            h('input', {
              type: 'number',
              id: 'priceUSD',
              name: 'priceUSD',
              value: formData.priceUSD,
              onChange: handleInputChange,
              required: true
            })
          ]),
          h('div', { className: 'form-group' }, [
            h('label', { htmlFor: 'area' }, getTranslation('area')),
            h('input', {
              type: 'number',
              id: 'area',
              name: 'area',
              value: formData.area,
              onChange: handleInputChange
            })
          ]),
          h('div', { className: 'form-group' }, [
            h('label', { htmlFor: 'floor' }, getTranslation('floor')),
            h('input', {
              type: 'number',
              id: 'floor',
              name: 'floor',
              value: formData.floor,
              onChange: handleInputChange
            })
          ]),
          h('div', { className: 'form-group' }, [
            h('label', { htmlFor: 'rooms' }, getTranslation('rooms')),
            h('input', {
              type: 'number',
              id: 'rooms',
              name: 'rooms',
              value: formData.rooms,
              onChange: handleInputChange
            })
          ]),
          h('div', { className: 'form-group' }, [
            h('label', { htmlFor: 'yearBuilt' }, getTranslation('year_built')),
            h('input', {
              type: 'number',
              id: 'yearBuilt',
              name: 'yearBuilt',
              value: formData.yearBuilt,
              onChange: handleInputChange
            })
          ]),
          h('div', { className: 'form-group' }, [
            h('label', { htmlFor: 'realtor.name' }, getTranslation('realtor_name')),
            h('input', {
              type: 'text',
              id: 'realtor.name',
              name: 'realtor.name',
              value: formData.realtor.name,
              onChange: handleInputChange
            })
          ]),
          h('div', { className: 'form-group' }, [
            h('label', { htmlFor: 'realtor.email' }, getTranslation('realtor_email')),
            h('input', {
              type: 'email',
              id: 'realtor.email',
              name: 'realtor.email',
              value: formData.realtor.email,
              onChange: handleInputChange
            })
          ]),
          h('div', { className: 'form-group' }, [
            h('label', { htmlFor: 'realtor.phone' }, getTranslation('realtor_phone')),
            h('input', {
              type: 'tel',
              id: 'realtor.phone',
              name: 'realtor.phone',
              value: formData.realtor.phone,
              onChange: handleInputChange,
              placeholder: '+86 123 456 7890'
            })
          ]),
          h('div', { className: 'form-group' }, [
            h('label', { htmlFor: 'descriptionEN' }, getTranslation('description_en')),
            h('textarea', {
              id: 'descriptionEN',
              name: 'descriptionEN',
              value: formData.descriptionEN,
              onChange: handleInputChange
            })
          ]),
          h('div', { className: 'form-group' }, [
            h('label', { htmlFor: 'descriptionZH' }, getTranslation('description_zh')),
            h('textarea', {
              id: 'descriptionZH',
              name: 'descriptionZH',
              value: formData.descriptionZH,
              onChange: handleInputChange
            })
          ]),
          h('div', { className: 'form-group' }, [
            h('label', null, getTranslation('upload_images')),
            h('input', {
              type: 'file',
              id: 'file-input',
              ref: fileInputRef,
              multiple: true,
              style: { display: 'none' },
              onChange: handleFileChange
            }),
            h('button', { type: 'button', onClick: handleUploadClick }, getTranslation('upload_images')),
            h('div', { className: 'image-preview' }, formData.images.map((url, index) => 
              h('img', { key: index, src: url, alt: `Preview ${index + 1}` })
            ))
          ]),
          error && h('div', { className: 'error' }, error),
          h('button', { type: 'submit' }, getTranslation(isEditing ? 'update_property' : 'add_property'))
        ]),
        h('div', { className: 'properties-list' }, [
          h('h2', null, getTranslation('existing_properties')),
          properties.length === 0
            ? h('p', null, getTranslation('no_properties'))
            : properties.map(property => h('div', { key: property.id, className: 'property-item' }, [
                h('p', null, `${getTranslation('title_en')}: ${property.titleEN || ''}`),
                h('p', null, `${getTranslation('title_zh')}: ${property.titleZH || ''}`),
                h('p', null, `${getTranslation('city')}: ${getTranslation(property.city) || ''}`),
                h('p', null, `${getTranslation('deal_type')}: ${getTranslation(property.dealType) || ''}`),
                h('p', null, `${getTranslation('property_type')}: ${getTranslation(property.propertyType) || ''}`),
                h('p', null, `${getTranslation('price_cny')}: Â¥${(property.priceCNY || 0).toLocaleString()}`),
                h('p', null, `${getTranslation('price_usd')}: $${(property.priceUSD || 0).toLocaleString()}`),
                property.area && h('p', null, `${getTranslation('area')}: ${property.area} mÂ²`),
                property.floor && h('p', null, `${getTranslation('floor')}: ${property.floor}`),
                property.rooms && h('p', null, `${getTranslation('rooms')}: ${property.rooms}`),
                property.yearBuilt && h('p', null, `${getTranslation('year_built')}: ${property.yearBuilt}`),
                (property.realtor && property.realtor.name) && h('p', null, `${getTranslation('realtor_name')}: ${property.realtor.name}`),
                (property.realtor && property.realtor.email) && h('p', null, `${getTranslation('realtor_email')}: ${property.realtor.email}`),
                (property.realtor && property.realtor.phone) && h('p', null, `${getTranslation('realtor_phone')}: ${property.realtor.phone}`),
                property.descriptionEN && h('p', null, `${getTranslation('description_en')}: ${property.descriptionEN}`),
                property.descriptionZH && h('p', null, `${getTranslation('description_zh')}: ${property.descriptionZH}`),
                property.images.length > 0 && h('div', { className: 'property-images' }, 
                  property.images.map((url, index) => 
                    h('img', { key: index, src: url, alt: `Property image ${index + 1}` })
                  )
                ),
                h('div', { className: 'property-actions' }, [
                  h('button', { onClick: () => handleEdit(property) }, getTranslation('edit')),
                  h('button', { className: 'secondary', onClick: () => handleDelete(property.id) }, getTranslation('delete'))
                ])
              ]))
        ])
      ]);
    }

    ReactDOM.render(h(AdminPanel), document.getElementById('root'));
  </script>
</body>
</html>